#!/usr/bin/env python

import os
import sys
import logging
from PyQt4 import QtGui
from PyQt4 import QtCore

from test_cases import *


class TestrunViewerMainWindow(QtGui.QMainWindow):

    def __init__(self):
        super(TestrunViewerMainWindow, self).__init__()
        self.initUI()

    def initUI(self):
        self.textEdit = QtGui.QTextEdit()
        self.setCentralWidget(self.textEdit)
        self.statusBar()
        self.setFocus()

        openFile = QtGui.QAction(QtGui.QIcon('open.png'), 'Open', self)
        openFile.setShortcut('Ctrl+O')
        openFile.setStatusTip('Open new File')
        self.connect(openFile, QtCore.SIGNAL('triggered()'), self.showOpenDialog)

        menubar = self.menuBar()
        fileMenu = menubar.addMenu('&File')
        fileMenu.addAction(openFile)
        
        self.setGeometry(300, 300, 350, 300)
        self.setWindowTitle('Test Run Viewer')        

    def showOpenDialog(self):
        filters = QtCore.QStringList([QtCore.QString('Movie Files (*.mov) '),
                                      QtCore.QString('Any files (*)')])
        dialog =  QtGui.QFileDialog(self, 'Open File', os.path.expanduser('~'))
        dialog.setNameFilters(filters)
        if dialog.exec_():
            logging.debug('Opening file: %s' % dialog.selectedFiles()[0])
            self.processFile(dialog.selectedFiles()[0])

   def processFile(self. filepath):
       pass
        

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    mainWindow = TestrunViewerMainWindow()
    mainWindow.show()
    app.exec_()
    
