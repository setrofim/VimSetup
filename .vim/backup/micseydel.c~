    #include <stdio.h>
    #include <stdlib.h>

    int main(int argc, char ** argv)
    {
       int * i, j, n;
       
       if(argc < 2)
       {
          printf("Usage: %s num_for_loops\n", argv[0]);
          return 1;
       }
       
       n = atoi(argv[1]); // n == num_for_loops
       
       i = (int *) malloc(n * sizeof(i[0]));
       // initialize the counters
       for(j = 0; j < n; j++)
          i[j] = 0;
       
       for(;;)
       {
          // print out the for-loop values
          printf("%d", i[0]);
          for(j = 1; j < n; j++)
          {
             printf(", %d", i[j]);
          }
          printf("\n");
          
          j = n - 1; // start by incrementing the inner-most for loop counter
          i[j]++;
          while(i[j] >= 3) // check that we haven't gone over
          {
             // reset the counter
             i[j] = 0;
             // increment the counter outer to the current one
             j--;
             // check the exit condtion
             // if j < 0, then all the counters have been reset
             if(j < 0)
                break;
                
             i[j]++;
          }
          if(j < 0)
             break;
       }
       
       free(i);
       return 0;
    }

